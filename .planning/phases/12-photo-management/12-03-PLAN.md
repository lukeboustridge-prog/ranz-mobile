---
phase: 12-photo-management
plan: 03
type: execute
wave: 2
depends_on: ["12-01"]
files_modified:
  - src/components/PhotoFullScreenViewer.tsx
  - src/components/index.ts
autonomous: true

must_haves:
  truths:
    - "User can view photo in full screen with pinch-to-zoom"
    - "User can swipe horizontally to navigate between photos"
    - "Photo metadata overlay shows capture date, GPS, and quick actions"
    - "User can close viewer with close button or swipe down"
  artifacts:
    - path: "src/components/PhotoFullScreenViewer.tsx"
      provides: "Full-screen photo viewer with zoom and swipe navigation"
      min_lines: 150
      exports: ["PhotoFullScreenViewer"]
  key_links:
    - from: "src/components/PhotoFullScreenViewer.tsx"
      to: "@likashefqet/react-native-image-zoom"
      via: "ImageZoom component import"
      pattern: "import.*ImageZoom"
---

<objective>
Create full-screen photo viewer with pinch-to-zoom and swipe navigation

Purpose: Inspectors need to examine photo details closely (zoom into defects, check annotations) and quickly navigate between related photos. This component provides a professional full-screen viewing experience similar to native photo galleries.

Output:
- PhotoFullScreenViewer component with zoom and swipe navigation
- Photo metadata overlay with capture info and quick actions
- Component exported from components/index.ts
</objective>

<execution_context>
@C:\Users\LukeBoustridge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\LukeBoustridge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-photo-management/12-RESEARCH.md
@.planning/phases/12-photo-management/12-01-SUMMARY.md

Key existing code:
@src/components/PhotoDetailModal.tsx - Existing modal for reference (this replaces the image display portion)
@src/types/database.ts - LocalPhoto type
@src/lib/theme.ts - COLORS, SPACING constants
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PhotoFullScreenViewer component</name>
  <files>src/components/PhotoFullScreenViewer.tsx</files>
  <action>
Create PhotoFullScreenViewer.tsx with the following implementation:

1. Props interface:
   ```typescript
   interface PhotoFullScreenViewerProps {
     photos: LocalPhoto[];
     initialIndex: number;
     visible: boolean;
     onClose: () => void;
     onAnnotate?: (photo: LocalPhoto) => void;
     onEdit?: (photo: LocalPhoto) => void;
     onViewDetails?: (photo: LocalPhoto) => void;
   }
   ```

2. Component structure:
   - Modal with transparent background
   - FlatList horizontal with pagingEnabled for swipe navigation
   - Each item contains ImageZoom component from @likashefqet/react-native-image-zoom
   - Photo metadata overlay at bottom (can be toggled by tap)
   - Header with close button and photo counter (e.g., "3 / 12")

3. ImageZoom configuration:
   ```typescript
   <ImageZoom
     uri={photo.localUri}
     minScale={1}
     maxScale={5}
     doubleTapScale={2}
   />
   ```

4. Metadata overlay content:
   - Photo type badge (e.g., "Detail", "Overview")
   - Quick tag if present
   - Capture date and time
   - GPS coordinates (if available)
   - Annotation indicator (if photo has annotations)

5. Quick action buttons in overlay:
   - Annotate button (calls onAnnotate)
   - Edit button (calls onEdit)
   - View Details button (calls onViewDetails)

6. State management:
   - Track current index on scroll
   - Track overlay visibility (toggle on tap)
   - Use useCallback for all handlers to prevent re-renders

7. Styling:
   - Full screen modal with black background
   - Semi-transparent overlay at bottom
   - White text for readability on dark background
   - Safe area handling for notch devices

8. Accessibility:
   - Proper accessibilityRole and accessibilityLabel on buttons
   - Photo description in accessible label
   - Swipe hint for screen readers

Use SCREEN_WIDTH from Dimensions for FlatList item sizing.
Use Platform.OS check for iOS safe area handling.
  </action>
  <verify>
TypeScript compiles without errors: `npx tsc --noEmit`
Component file exists with PhotoFullScreenViewer export.
  </verify>
  <done>PhotoFullScreenViewer component created with zoom, swipe navigation, metadata overlay, and quick actions</done>
</task>

<task type="auto">
  <name>Task 2: Export component from index.ts</name>
  <files>src/components/index.ts</files>
  <action>
Add export for PhotoFullScreenViewer to components/index.ts:

```typescript
export { PhotoFullScreenViewer } from "./PhotoFullScreenViewer";
```

Place alphabetically with other component exports.
  </action>
  <verify>
TypeScript compiles without errors: `npx tsc --noEmit`
Verify components/index.ts includes PhotoFullScreenViewer export.
  </verify>
  <done>PhotoFullScreenViewer exported from components/index.ts</done>
</task>

</tasks>

<verification>
1. TypeScript compiles without errors: `npx tsc --noEmit`
2. PhotoFullScreenViewer.tsx exists with all features implemented
3. Component uses @likashefqet/react-native-image-zoom (verify import)
4. components/index.ts exports PhotoFullScreenViewer
5. Metadata overlay includes capture info and action buttons
</verification>

<success_criteria>
- Full-screen viewer opens as modal
- Pinch-to-zoom works with 1x min, 5x max scale
- Double-tap zooms to 2x
- Horizontal swipe navigates between photos
- Metadata overlay shows photo info and can be toggled
- Quick action buttons present for annotate, edit, details
- Close button and swipe-down closes viewer
- All TypeScript compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/12-photo-management/12-03-SUMMARY.md`
</output>
