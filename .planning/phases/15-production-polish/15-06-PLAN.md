---
phase: 15-production-polish
plan: 06
type: execute
wave: 4
depends_on: ["15-01", "15-02", "15-03", "15-04", "15-05"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Preview build completes successfully on EAS"
    - "App icons are RANZ branded (not placeholder)"
    - "Sentry receives test crash report"
    - "All npm tests pass"
  artifacts: []
  key_links: []
---

<objective>
Human verification checkpoint for production readiness.

Purpose: Verify that all production polish work is complete and the app is ready for production deployment. This includes visual verification of app icons and functional testing of crash reporting.

Output: Confirmation that app is production-ready or list of issues to address.
</objective>

<execution_context>
@C:\Users\LukeBoustridge\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\LukeBoustridge\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/15-production-polish/15-RESEARCH.md

@.planning/phases/15-production-polish/15-01-SUMMARY.md
@.planning/phases/15-production-polish/15-02-SUMMARY.md
@.planning/phases/15-production-polish/15-03-SUMMARY.md
@.planning/phases/15-production-polish/15-04-SUMMARY.md
@.planning/phases/15-production-polish/15-05-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <action>Replace placeholder app icons with RANZ branding</action>
  <instructions>
The app currently uses Expo's default placeholder icons (concentric circles). Before production release, these must be replaced with RANZ branded assets.

**Required Assets:**

1. **iOS App Icon** (`assets/icon.png`)
   - Size: 1024x1024 pixels
   - Format: PNG
   - Requirements: No transparency, no rounded corners (iOS adds them)

2. **Android Adaptive Icon** (`assets/adaptive-icon.png`)
   - Size: 1024x1024 pixels
   - Format: PNG
   - This is the foreground layer; background color is set in app.json (#2d5c8f)

3. **Splash Icon** (`assets/splash-icon.png`)
   - Size: Minimum 200x200 pixels (centered on splash background)
   - Format: PNG with transparency OK
   - Background color is #2d5c8f (RANZ blue)

**Source:** Request these assets from RANZ marketing/design team. The icons should feature the RANZ logo or "RANZ Roofing" wordmark.

**After replacing:**
1. Run `npx expo prebuild --clean` to regenerate native projects
2. Test on iOS Simulator and Android Emulator to verify icons appear correctly
  </instructions>
  <resume-signal>Type "icons updated" when RANZ branded assets are in place</resume-signal>
</task>

<task type="checkpoint:human-action" gate="blocking">
  <action>Configure Sentry project and secrets</action>
  <instructions>
Sentry is integrated but needs a project created and DSN configured.

**Steps:**

1. **Create Sentry Project:**
   - Go to https://sentry.io
   - Create organization "ranz" (or use existing)
   - Create project "ranz-mobile" (React Native)
   - Copy the DSN from Project Settings > Client Keys

2. **Set EAS Secret:**
   ```bash
   eas secret:create --name EXPO_PUBLIC_SENTRY_DSN --value "https://xxx@xxx.ingest.sentry.io/xxx"
   ```

3. **Set Sentry Auth Token:**
   - Go to Sentry > Settings > Auth Tokens
   - Create token with `project:releases` and `org:read` scopes
   - Set in EAS:
   ```bash
   eas secret:create --name SENTRY_AUTH_TOKEN --value "sntrys_xxx"
   ```

4. **Update app.json** (if organization differs from "ranz"):
   Update the Sentry plugin config with correct organization name.

**Verification:**
After next preview build, trigger a test crash and verify it appears in Sentry dashboard.
  </instructions>
  <resume-signal>Type "sentry configured" when Sentry project and secrets are set up</resume-signal>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Production polish: EAS Build config, environment config, Sentry integration, Jest tests, README</what-built>
  <how-to-verify>
**1. Run Tests:**
```bash
npm test
```
All tests should pass.

**2. Build Preview:**
```bash
eas build --profile preview --platform all
```
Build should complete successfully on EAS.

**3. Install Preview Build:**
- iOS: Install via TestFlight or QR code
- Android: Download APK from EAS dashboard

**4. Verify App Icons:**
- Check app icon on home screen is RANZ branded
- Check splash screen shows RANZ branding

**5. Test Sentry (Preview build only):**
Add a temporary crash trigger in the app, or check Sentry dashboard for any automatic captures during testing.

**6. Verify Environment:**
In the app, check that the environment is detected as "preview" (if you've added environment logging).

**Issues to report:**
- Build failures
- Incorrect icons
- Sentry not receiving events
- Test failures
- Environment misdetection
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
1. RANZ branded icons visible on device home screen
2. Splash screen shows RANZ branding
3. npm test passes with all tests green
4. EAS preview build completes successfully
5. Sentry dashboard receives test events
6. Environment detected correctly in preview build
</verification>

<success_criteria>
- App icons are RANZ branded (not Expo placeholder)
- Preview build installs and runs on real device
- Sentry receives crash reports from preview build
- All automated tests pass
- README accurately documents the project
- App is ready for production build and store submission
</success_criteria>

<output>
After completion, create `.planning/phases/15-production-polish/15-06-SUMMARY.md`
</output>
